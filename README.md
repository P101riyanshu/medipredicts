## Clinical Decision Support System for Disease Prediction (Implementation Guide)

This repository contains a full implementation pipeline:

1. **Data preparation** (synthetic dataset generation + cleaning + feature metadata)
2. **ML training** (model comparison and best model selection)
3. **Backend API** (FastAPI prediction service)
4. **Frontend UI** (web app with improved UX)

---

## 1) Project Structure

```text
├── backend/
│   ├── app.py
│   ├── model.pkl                 # generated after training
│   └── requirements.txt
├── frontend/
│   ├── index.html
│   ├── script.js
│   └── style.css
├── data/
│   ├── dataset.csv               # generated by preprocess.py
│   ├── selected_features.json
│   └── preprocess.py
├── training/
│   ├── train.py
│   └── evaluate.py
└── README.md
```

---

## 2) Setup

### Prerequisites
- Python 3.10+
- pip

### Install dependencies
```bash
pip install -r backend/requirements.txt
```

---

## 3) Data Preparation

Generate and clean the dataset:
```bash
python data/preprocess.py
```

This command creates:
- `data/dataset.csv`
- `data/selected_features.json`

Dataset fields include:
- `age`, `gender`
- `symptom_*` binary columns
- `symptom_duration`
- `smoking`, `alcohol`
- `disease`

---

## 4) Train and Compare Models

Run training:
```bash
python training/train.py
```

What it does:
- Splits data into train/test sets
- Trains:
  - Logistic Regression
  - Random Forest
  - SVM
  - XGBoost (if available)
- Computes: Accuracy, Precision, Recall, F1-score
- Selects best model by weighted F1
- Saves bundle to `backend/model.pkl`

---

## 5) Evaluate Model (Optional)

```bash
python training/evaluate.py
```

Generates evaluation JSON report in `training/evaluation_report.json`.

---

## 6) Run Backend API

```bash
cd backend
uvicorn app:app --host 0.0.0.0 --port 8000
```

Available endpoints:
- `GET /health`
- `GET /metadata`
- `POST /predict`

### Example Request
```json
{
  "age": 28,
  "gender": "female",
  "symptoms": ["fever", "cough", "headache"],
  "duration_days": 2,
  "lifestyle": {
    "smoking": false,
    "alcohol": false
  }
}
```

### Example Response
```json
{
  "predictions": [
    {"disease": "Influenza", "confidence": 0.81},
    {"disease": "Common Cold", "confidence": 0.62},
    {"disease": "COVID-19", "confidence": 0.39}
  ],
  "important_symptoms": ["fever", "cough", "fatigue"]
}
```

---

## 7) Run Frontend

```bash
cd frontend
python -m http.server 5500
```

Open:
- Frontend UI: `http://localhost:5500`
- API Docs: `http://localhost:8000/docs`

---

## 8) End-to-End Run Order

Use this exact order:

```bash
pip install -r backend/requirements.txt
python data/preprocess.py
python training/train.py
python training/evaluate.py
cd backend && uvicorn app:app --host 0.0.0.0 --port 8000
# in another terminal
cd frontend && python -m http.server 5500
```

---

## 9) Troubleshooting

- **`model.pkl not found`**: run `python training/train.py` first.
- **Backend not reachable from frontend**: ensure API is running on `http://localhost:8000`.
- **Dependency install issues**: check network/proxy and Python version compatibility.

